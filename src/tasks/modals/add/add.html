<modal title="{{'Add Task' | translate}}" save="$ctrl.save()" cancel="$hide()">
    <div class="form-group">
        <label for="subject"><translate>Subject</translate> <span class="text-danger">*</span></label>
        <input class="form-control" id='subject' ng-model="$ctrl.task.subject" autofocus required>
    </div>
    <div class="form-group">
        <label for="action"><translate>Action</translate></label>
        <select chosen
                disable-search="true"
                class="form-control"
                id="action"
                name="action"
                ng-options="opt as opt for opt in $ctrl.serverConstants.data.activities"
                ng-model="$ctrl.task.activity_type">
            <option value=""></option>
        </select>
    </div>
    <div class="checkbox">
        <label for="set-due-date">
            <input id="set-due-date" ng-model="$ctrl.setDueDate" type="checkbox"/>
            <translate>Set Due Date</translate>
        </label>
    </div>
    <div class="form-group" ng-if="$ctrl.setDueDate">
        <label for="due-date" translate>Due Date</label>
        <datetimepicker ng-model="$ctrl.task.start_at" id="due-date"
                        hour-step="1"
                        minute-step="1">
        </datetimepicker>
    </div>
    <div class="checkbox">
        <label for="notification-type">
            <input id="notification-type" ng-model="$ctrl.task.notification_type" type="checkbox" ng-true-value="'email'" ng-false-value="null"/>
            <translate>Send Email Notification</translate>
        </label>
    </div>
    <div ng-if="$ctrl.task.notification_type">
        <div class="row">
            <div class="col-sm-4">
                <label for="notification_type" translate>Notify in</label>
                <input type="number" class="form-control" ng-model="$ctrl.task.notification_time_before" id="notification_type" ng-required="$ctrl.task.notification_type" min="0">
            </div>
            <div class="col-sm-8">
                <label for="notification_type" translate>Interval</label>
                <select chosen ng-model="$ctrl.task.notification_time_unit" ng-required="$ctrl.task.notification_type">
                    <option value="minutes">Minutes</option>
                    <option value="hours">Hours</option>
                </select>
            </div>
        </div>
    </div>
    <label translate>Contacts</label>
    <div class="form-group" ng-repeat="contact in $ctrl.contactsList track by $index">
        <contact-selector return-fn="$ctrl.setContact($params, $index)" contact-name="$ctrl.contactNames[contact]"></contact-selector>
    </div>
    <div class="form-group">
        <button ng-click="$ctrl.addContact()" class="btn btn-default btn-block btn-xs"><i class="fa fa-plus-circle"></i> <translate>Add Contact</translate></button>
    </div>
    <div class="form-group">
        <label translate>Tags</label>
        <tag-selector ng-model="$ctrl.task.tag_list" tag-list="$ctrl.tasksTags.data"></tag-selector>
    </div>
    <div class="form-group">
        <label for="comment" translate>Comment</label>
        <input class="form-control" id='comment' ng-model="$ctrl.comment"/>
    </div>
</modal>
