<modal title="{{'Log Task' | translate}}" cancel="$hide()" save="$ctrl.save()">
    <div class="form-group">
        <label for="subject"><translate>Subject</translate> <span class="text-danger">*</span></label>
        <input class="form-control" id='subject' ng-model="$ctrl.task.subject" required/>
    </div>
    <div class="form-group">
        <label for="action"><translate>Action</translate></label>
        <select chosen
                required
                disable-search="true"
                data-placeholder-text-single="'Select an Option' | translate"
                class="form-control"
                id="action"
                name="action"
                ng-options="opt for opt in $ctrl.serverConstants.data.activities"
                ng-model="$ctrl.task.activity_type">
            <option value=""></option>
        </select>
    </div>
    <div class="form-group">
        <label for="completed" translate>Completed On</label>
        <datetimepicker ng-model="$ctrl.task.completed_at"
                        hour-step="1"
                        minute-step="1"
                        id="completed">
        </datetimepicker>
    </div>
    <div class="form-group">
        <label translate>Contacts</label>
        <div ng-repeat="contact in $ctrl.contactsList track by $index">
            <select chosen ng-options="opt.id as opt.name for opt in $ctrl.contacts.completeList" ng-model="$ctrl.contactsList[$index]"></select>
        </div>
        <div>
            <a ng-click="$ctrl.addContact()"><i class="fa fa-plus-square"></i> Add Contact</a>
        </div>
    </div>
    <div class="form-group">
        <label for="result"><translate>Result</translate> <span class="text-danger">*</span></label>
        <select chosen
                ng-required="$ctrl.toComplete"
                disable-search="true"
                data-placeholder-text-single="'Select an Option' | translate"
                class="form-control"
                id='result'
                ng-options="opt for opt in $ctrl.serverConstants.data.results[$ctrl.task.activity_type.toLowerCase()] || $ctrl.serverConstants.data.results['default']"
                ng-model="$ctrl.task.result">
            <option value=""></option>
        </select>
    </div>
    <div ng-if="$ctrl.toComplete" class="form-group">
        <label for="nextAction" translate>Next Action</label>
        <select chosen
                disable-search="true"
                data-placeholder-text-single="'Select an Option' | translate"
                class="form-control"
                id='nextAction'
                ng-options="opt for opt in $ctrl.serverConstants.data.next_actions[$ctrl.task.activity_type.toLowerCase()] || $ctrl.serverConstants.data.next_actions['default']"
                ng-model="$ctrl.task.next_action">
            <option value=""></option>
        </select>
    </div>
    <div>
        <label translate>Tags</label>
        <tag-selector ng-model="$ctrl.task.tag_list" tag-list="$ctrl.tasksTags.data"></tag-selector>
    </div>
    <div class="form-group">
        <label for="comment" translate>Comment</label>
        <input class="form-control" id='comment' ng-model="$ctrl.comment"/>
    </div>
</modal>
