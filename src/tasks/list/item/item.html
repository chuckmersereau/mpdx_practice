<div class="item" ng-class="{ 'item--selected' : $ctrl.selected }" ng-click="$ctrl.onSelect()">
    <div class="pull-left">
        <div class="btn-group">
            <button class="btn btn-xs btn-default" ng-click="$ctrl.complete(); $event.stopPropagation();" title="{{::'Completed' | translate}}" ng-disabled="::$ctrl.task.completed">
                <i class="fa" ng-class="$ctrl.task.completed ? 'fa-check-square-o' : 'fa-square-o'" ></i>
            </button>
            <button class="btn btn-xs btn-default" ng-click="$ctrl.star(); $event.stopPropagation();" title="{{::'Starred' | translate}}">
                <i class="fa" ng-class="$ctrl.task.starred ? 'fa-star' : 'fa-star-o'" ></i>
            </button>
        </div>
    </div>
    <div class="pull-right">
        <div class="btn-group">
            <a class="btn btn-xs btn-default" ng-click="$ctrl.openComments(); $event.stopPropagation();" title="{{ ::'View Comments' | translate }}">
                <i class="fa fa-commenting-o"></i>
                &nbsp;
                {{ $ctrl.task.comments.length || $ctrl.task.comments_count }}
            </a>
            <a class="btn btn-xs btn-danger" ng-click="$ctrl.delete(); $event.stopPropagation();" title="{{ ::'Delete Task' | translate }}">
                <i class="fa fa-trash-o trash"></i>
            </a>
        </div>
    </div>
    <div class="item-title">
        <strong>{{ ::$ctrl.task.activity_type | translate }}</strong>
        <a ng-click="$ctrl.edit(); $event.stopPropagation();">{{ ::$ctrl.task.subject }}</a>
        <span ng-if="::$ctrl.task.completed" translate-params-result="::$ctrl.task.result" translate>
            ({{ result }})
        </span>
        <span ng-if="::!$ctrl.task.no_date && $ctrl.task.start_at && !$ctrl.task.completed">
            {{ ::$ctrl.task.start_at | localizeWithTime }}
        </span>
        <span ng-if="::!$ctrl.task.no_date && $ctrl.task.start_at && $ctrl.task.completed">
            {{ ::$ctrl.task.completed_at | localizeWithTime }}
        </span>
        <span ng-repeat="activityContact in ::$ctrl.task.activity_contacts | limitTo : 5">
            <a ng-click="$ctrl.openContacts(); $event.stopPropagation();">
                <span ng-if="::$index < 4">{{ ::activityContact.contact.name }}</span>
                <span ng-if="::$index === 4" translate translate-plural="and {{$count}} others" translate-n="::$ctrl.task.activity_contacts.length - 4">and 1 other</span>
            </a>
        </span>
        <span class="tags">
            <span class="tag" ng-repeat="tag in $ctrl.task.tag_list">{{ ::tag |limitTo: 20 }}{{ ::tag.length > 20 ? '...' : '' }}</span>
        </span>
    </div>
</div>

