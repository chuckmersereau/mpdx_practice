<form ng-if="!$ctrl.personalService.loading">
    <div class="row spacer-top"></div>
    <div class="panel-group">
        <div class="panel panel-default pref-panel">
            <div class="panel-heading pref-head" ng-click="$ctrl.setTab('first_name')">
                <div class="row">
                    <div class="col-sm-4">
                        <i class="fa fa-angle-right" ng-class="{ 'fa-rotate-90' : $ctrl.tabSelected('first_name') }"></i>
                        <span translate>First Name</span>
                    </div>
                    <div class="col-sm-6 pref-current">
                        {{$ctrl.users.current.attributes.first_name}}
                    </div>
                    <div class="col-sm-2 text-right">
                        <span class="panel-open-btn">
                            <span ng-hide="$ctrl.tabSelected('first_name')" translate>Expand</span>
                            <span ng-show="$ctrl.tabSelected('first_name')" translate>Close
                            </span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="panel-animate" ng-show="$ctrl.tabSelected('first_name')">
                <div class="panel-body pref-body">
                    <div class="row pref-row">
                        <div class="col-md-8 col-md-offset-4">
                            <div class="form-group">
                                <label for="firstName" translate>Your first name</label>
                                <input type="text" class="form-control" ng-model="$ctrl.users.current.attributes.first_name" id="firstName">
                            </div>
                            <button type="submit" ng-click="$ctrl.save()" ng-disabled="$ctrl.saving" class="btn btn-primary btn-actionable">
                                <span translate>Save</span>&nbsp;
                                <span class="btn-progress" ng-show="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default pref-panel">
            <div class="panel-heading pref-head" ng-click="$ctrl.setTab('last_name')">
                <div class="row">
                    <div class="col-sm-4">
                        <i class="fa fa-angle-right" ng-class="{ 'fa-rotate-90' : $ctrl.tabSelected('last_name') }"></i>
                        <span translate>Last Name</span>
                    </div>
                    <div class="col-sm-6 pref-current">
                        {{$ctrl.users.current.attributes.last_name}}
                    </div>
                    <div class="col-sm-2 text-right">
                        <span class="panel-open-btn">
                            <span ng-hide="$ctrl.tabSelected('last_name')" translate>Expand</span>
                            <span ng-show="$ctrl.tabSelected('last_name')" translate>Close</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="panel-animate" ng-show="$ctrl.tabSelected('last_name')">
                <div class="panel-body pref-body">
                    <div class="row pref-row">
                        <div class="col-md-8 col-md-offset-4">
                            <div class="form-group">
                                <label for="lastName" translate>Your last name</label>
                                <input id="lastName" class="form-control" ng-model="$ctrl.users.current.attributes.last_name">
                            </div>
                            <button type="submit" ng-click="$ctrl.save()" ng-disabled="$ctrl.saving" class="btn btn-primary btn-actionable">
                                <span translate>Save</span>&nbsp;
                                <span class="btn-progress" ng-show="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default pref-panel">
            <div class="panel-heading pref-head" ng-click="$ctrl.setTab('email')">
                <div class="row">
                    <div class="col-sm-4">
                        <i class="fa fa-angle-right" ng-class="{ 'fa-rotate-90' : $ctrl.tabSelected('email') }"></i>
                        <span translate>Email Address</span>
                    </div>
                    <div class="col-sm-6 pref-current">
                        {{$ctrl.users.current.attributes.preferences.email}}
                    </div>
                    <div class="col-sm-2 text-right">
                        <span class="panel-open-btn">
                            <span ng-hide="$ctrl.tabSelected('email')" translate>Expand</span>
                            <span ng-show="$ctrl.tabSelected('email')" translate>Close</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="panel-animate" ng-show="$ctrl.tabSelected('email')">
                <div class="panel-body pref-body">
                    <div class="row pref-row">
                        <div class="col-md-8 col-md-offset-4">
                            <div class="form-group">
                                <label for="email" translate>Email Address</label>
                                <p class="text-muted" translate>This is the email address where notifications will be sent.</p>
                                <input id="email" type="email" class="form-control" ng-model="$ctrl.users.current.attributes.preferences.email">
                            </div>
                            <button type="submit" ng-click="$ctrl.save()" ng-disabled="$ctrl.saving" class="btn btn-primary btn-actionable">
                                <span translate>Save</span>&nbsp;
                                <span class="btn-progress" ng-show="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default pref-panel">
            <div class="panel-heading pref-head" ng-click="$ctrl.setTab('time_zone')">
                <div class="row">
                    <div class="col-sm-4">
                        <i class="fa fa-angle-right" ng-class="{ 'fa-rotate-90' : $ctrl.tabSelected('time_zone') }"></i>
                        <span translate>Time zone</span>
                    </div>
                    <div class="col-sm-6 pref-current">
                        {{$ctrl.users.current.attributes.preferences.time_zone}}
                    </div>
                    <div class="col-sm-2 text-right">
                        <span class="panel-open-btn">
                            <span ng-hide="$ctrl.tabSelected('time_zone')" translate>Expand</span>
                            <span ng-show="$ctrl.tabSelected('time_zone')" translate>Close</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="panel-animate" ng-show="$ctrl.tabSelected('time_zone')">
                <div class="panel-body pref-body">
                    <div class="row pref-row">
                        <div class="col-md-8 col-md-offset-4">
                            <div class="form-group">
                                <label for="timeZone" translate>Time zone</label>
                                <p class="text-muted" translate>The timezone will be used in setting tasks, appointments, completion dates, etc. Please make sure it matches the one your computer is set to.</p>
                                <select chosen ng-model="$ctrl.users.current.attributes.preferences.time_zone" class="form-control" id="timeZone">
                                    <option value="American Samoa">(GMT-11:00) American Samoa</option>
                                    <option value="International Date Line West">(GMT-11:00) International Date Line West</option>
                                    <option value="Midway Island">(GMT-11:00) Midway Island</option>
                                    <option value="Samoa">(GMT-11:00) Samoa</option>
                                    <option value="Hawaii">(GMT-10:00) Hawaii</option>
                                    <option value="Alaska">(GMT-09:00) Alaska</option>
                                    <option value="Pacific Time (US &amp; Canada)">(GMT-08:00) Pacific Time (US &amp; Canada)</option>
                                    <option value="Tijuana">(GMT-08:00) Tijuana</option>
                                    <option value="Arizona">(GMT-07:00) Arizona</option>
                                    <option value="Chihuahua">(GMT-07:00) Chihuahua</option>
                                    <option value="Mazatlan">(GMT-07:00) Mazatlan</option>
                                    <option value="Mountain Time (US &amp; Canada)">(GMT-07:00) Mountain Time (US &amp; Canada)</option>
                                    <option value="Central America">(GMT-06:00) Central America</option>
                                    <option value="Central Time (US &amp; Canada)">(GMT-06:00) Central Time (US &amp; Canada)</option>
                                    <option value="Guadalajara">(GMT-06:00) Guadalajara</option>
                                    <option value="Mexico City">(GMT-06:00) Mexico City</option>
                                    <option value="Monterrey">(GMT-06:00) Monterrey</option>
                                    <option value="Saskatchewan">(GMT-06:00) Saskatchewan</option>
                                    <option value="Bogota">(GMT-05:00) Bogota</option>
                                    <option value="Eastern Time (US &amp; Canada)">(GMT-05:00) Eastern Time (US &amp; Canada)</option>
                                    <option value="Indiana (East)">(GMT-05:00) Indiana (East)</option>
                                    <option value="Lima">(GMT-05:00) Lima</option>
                                    <option value="Quito">(GMT-05:00) Quito</option>
                                    <option value="Atlantic Time (Canada)">(GMT-04:00) Atlantic Time (Canada)</option>
                                    <option value="Caracas">(GMT-04:00) Caracas</option>
                                    <option value="Georgetown">(GMT-04:00) Georgetown</option>
                                    <option value="La Paz">(GMT-04:00) La Paz</option>
                                    <option value="Santiago">(GMT-04:00) Santiago</option>
                                    <option value="Newfoundland">(GMT-03:30) Newfoundland</option>
                                    <option value="Brasilia">(GMT-03:00) Brasilia</option>
                                    <option value="Buenos Aires">(GMT-03:00) Buenos Aires</option>
                                    <option value="Greenland">(GMT-03:00) Greenland</option>
                                    <option value="Montevideo">(GMT-03:00) Montevideo</option>
                                    <option value="Mid-Atlantic">(GMT-02:00) Mid-Atlantic</option>
                                    <option value="Azores">(GMT-01:00) Azores</option>
                                    <option value="Cape Verde Is.">(GMT-01:00) Cape Verde Is.</option>
                                    <option value="Casablanca">(GMT+00:00) Casablanca</option>
                                    <option value="Dublin">(GMT+00:00) Dublin</option>
                                    <option value="Edinburgh">(GMT+00:00) Edinburgh</option>
                                    <option value="Lisbon">(GMT+00:00) Lisbon</option>
                                    <option value="London">(GMT+00:00) London</option>
                                    <option value="Monrovia">(GMT+00:00) Monrovia</option>
                                    <option value="UTC">(GMT+00:00) UTC</option>
                                    <option value="Amsterdam">(GMT+01:00) Amsterdam</option>
                                    <option value="Belgrade">(GMT+01:00) Belgrade</option>
                                    <option value="Berlin">(GMT+01:00) Berlin</option>
                                    <option value="Bern">(GMT+01:00) Bern</option>
                                    <option value="Bratislava">(GMT+01:00) Bratislava</option>
                                    <option value="Brussels">(GMT+01:00) Brussels</option>
                                    <option value="Budapest">(GMT+01:00) Budapest</option>
                                    <option value="Copenhagen">(GMT+01:00) Copenhagen</option>
                                    <option value="Ljubljana">(GMT+01:00) Ljubljana</option>
                                    <option value="Madrid">(GMT+01:00) Madrid</option>
                                    <option value="Paris">(GMT+01:00) Paris</option>
                                    <option value="Prague">(GMT+01:00) Prague</option>
                                    <option value="Rome">(GMT+01:00) Rome</option>
                                    <option value="Sarajevo">(GMT+01:00) Sarajevo</option>
                                    <option value="Skopje">(GMT+01:00) Skopje</option>
                                    <option value="Stockholm">(GMT+01:00) Stockholm</option>
                                    <option value="Vienna">(GMT+01:00) Vienna</option>
                                    <option value="Warsaw">(GMT+01:00) Warsaw</option>
                                    <option value="West Central Africa">(GMT+01:00) West Central Africa</option>
                                    <option value="Zagreb">(GMT+01:00) Zagreb</option>
                                    <option value="Athens">(GMT+02:00) Athens</option>
                                    <option value="Bucharest">(GMT+02:00) Bucharest</option>
                                    <option value="Cairo">(GMT+02:00) Cairo</option>
                                    <option value="Harare">(GMT+02:00) Harare</option>
                                    <option value="Helsinki">(GMT+02:00) Helsinki</option>
                                    <option value="Istanbul">(GMT+02:00) Istanbul</option>
                                    <option value="Jerusalem">(GMT+02:00) Jerusalem</option>
                                    <option value="Kaliningrad">(GMT+02:00) Kaliningrad</option>
                                    <option value="Kyiv">(GMT+02:00) Kyiv</option>
                                    <option value="Pretoria">(GMT+02:00) Pretoria</option>
                                    <option value="Riga">(GMT+02:00) Riga</option>
                                    <option value="Sofia">(GMT+02:00) Sofia</option>
                                    <option value="Tallinn">(GMT+02:00) Tallinn</option>
                                    <option value="Vilnius">(GMT+02:00) Vilnius</option>
                                    <option value="Baghdad">(GMT+03:00) Baghdad</option>
                                    <option value="Kuwait">(GMT+03:00) Kuwait</option>
                                    <option value="Minsk">(GMT+03:00) Minsk</option>
                                    <option value="Moscow">(GMT+03:00) Moscow</option>
                                    <option value="Nairobi">(GMT+03:00) Nairobi</option>
                                    <option value="Riyadh">(GMT+03:00) Riyadh</option>
                                    <option value="St. Petersburg">(GMT+03:00) St. Petersburg</option>
                                    <option value="Volgograd">(GMT+03:00) Volgograd</option>
                                    <option value="Tehran">(GMT+03:30) Tehran</option>
                                    <option value="Abu Dhabi">(GMT+04:00) Abu Dhabi</option>
                                    <option value="Baku">(GMT+04:00) Baku</option>
                                    <option value="Muscat">(GMT+04:00) Muscat</option>
                                    <option value="Samara">(GMT+04:00) Samara</option>
                                    <option value="Tbilisi">(GMT+04:00) Tbilisi</option>
                                    <option value="Yerevan">(GMT+04:00) Yerevan</option>
                                    <option value="Kabul">(GMT+04:30) Kabul</option>
                                    <option value="Ekaterinburg">(GMT+05:00) Ekaterinburg</option>
                                    <option value="Islamabad">(GMT+05:00) Islamabad</option>
                                    <option value="Karachi">(GMT+05:00) Karachi</option>
                                    <option value="Tashkent">(GMT+05:00) Tashkent</option>
                                    <option value="Chennai">(GMT+05:30) Chennai</option>
                                    <option value="Kolkata">(GMT+05:30) Kolkata</option>
                                    <option value="Mumbai">(GMT+05:30) Mumbai</option>
                                    <option value="New Delhi">(GMT+05:30) New Delhi</option>
                                    <option value="Sri Jayawardenepura">(GMT+05:30) Sri Jayawardenepura</option>
                                    <option value="Kathmandu">(GMT+05:45) Kathmandu</option>
                                    <option value="Almaty">(GMT+06:00) Almaty</option>
                                    <option value="Astana">(GMT+06:00) Astana</option>
                                    <option value="Dhaka">(GMT+06:00) Dhaka</option>
                                    <option value="Urumqi">(GMT+06:00) Urumqi</option>
                                    <option value="Rangoon">(GMT+06:30) Rangoon</option>
                                    <option value="Bangkok">(GMT+07:00) Bangkok</option>
                                    <option value="Hanoi">(GMT+07:00) Hanoi</option>
                                    <option value="Jakarta">(GMT+07:00) Jakarta</option>
                                    <option value="Krasnoyarsk">(GMT+07:00) Krasnoyarsk</option>
                                    <option value="Novosibirsk">(GMT+07:00) Novosibirsk</option>
                                    <option value="Beijing">(GMT+08:00) Beijing</option>
                                    <option value="Chongqing">(GMT+08:00) Chongqing</option>
                                    <option value="Hong Kong">(GMT+08:00) Hong Kong</option>
                                    <option value="Irkutsk">(GMT+08:00) Irkutsk</option>
                                    <option value="Kuala Lumpur">(GMT+08:00) Kuala Lumpur</option>
                                    <option value="Perth">(GMT+08:00) Perth</option>
                                    <option value="Singapore">(GMT+08:00) Singapore</option>
                                    <option value="Taipei">(GMT+08:00) Taipei</option>
                                    <option value="Ulaanbaatar">(GMT+08:00) Ulaanbaatar</option>
                                    <option value="Osaka">(GMT+09:00) Osaka</option>
                                    <option value="Sapporo">(GMT+09:00) Sapporo</option>
                                    <option value="Seoul">(GMT+09:00) Seoul</option>
                                    <option value="Tokyo">(GMT+09:00) Tokyo</option>
                                    <option value="Yakutsk">(GMT+09:00) Yakutsk</option>
                                    <option value="Adelaide">(GMT+09:30) Adelaide</option>
                                    <option value="Darwin">(GMT+09:30) Darwin</option>
                                    <option value="Brisbane">(GMT+10:00) Brisbane</option>
                                    <option value="Canberra">(GMT+10:00) Canberra</option>
                                    <option value="Guam">(GMT+10:00) Guam</option>
                                    <option value="Hobart">(GMT+10:00) Hobart</option>
                                    <option value="Melbourne">(GMT+10:00) Melbourne</option>
                                    <option value="Port Moresby">(GMT+10:00) Port Moresby</option>
                                    <option value="Sydney">(GMT+10:00) Sydney</option>
                                    <option value="Vladivostok">(GMT+10:00) Vladivostok</option>
                                    <option value="Magadan">(GMT+11:00) Magadan</option>
                                    <option value="New Caledonia">(GMT+11:00) New Caledonia</option>
                                    <option value="Solomon Is.">(GMT+11:00) Solomon Is.</option>
                                    <option value="Srednekolymsk">(GMT+11:00) Srednekolymsk</option>
                                    <option value="Auckland">(GMT+12:00) Auckland</option>
                                    <option value="Fiji">(GMT+12:00) Fiji</option>
                                    <option value="Kamchatka">(GMT+12:00) Kamchatka</option>
                                    <option value="Marshall Is.">(GMT+12:00) Marshall Is.</option>
                                    <option value="Wellington">(GMT+12:00) Wellington</option>
                                    <option value="Chatham Is.">(GMT+12:45) Chatham Is.</option>
                                    <option value="Nuku'alofa">(GMT+13:00) Nuku'alofa</option>
                                    <option value="Tokelau Is.">(GMT+13:00) Tokelau Is.</option>
                                    <!--<option value=""></option>-->
                                    <!--<option ng-repeat="timezone in $ctrl.timezones">{{timezone}}</option>-->
                                </select>
                            </div>
                            <button type="submit" ng-click="$ctrl.save()" ng-disabled="$ctrl.saving" class="btn btn-primary btn-actionable">
                                <span translate>Save</span>&nbsp;
                                <span class="btn-progress" ng-show="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default pref-panel">
            <div class="panel-heading pref-head" ng-click="$ctrl.setTab('locale')">
                <div class="row">
                    <div class="col-sm-4">
                        <i class="fa fa-angle-right" ng-class="{ 'fa-rotate-90' : $ctrl.tabSelected('locale') }"></i>
                        <span translate>Locale</span>
                    </div>
                    <div class="col-sm-6 pref-current">
                        <span class="flag-icon flag-icon-{{$ctrl.getCountry($ctrl.users.current.attributes.preferences.locale)}}" ></span> {{$ctrl.$window.languageMappingList[$ctrl.users.current.attributes.preferences.locale].nativeName}}
                    </div>
                    <div class="col-sm-2 text-right">
                        <span class="panel-open-btn">
                            <span ng-hide="$ctrl.tabSelected('locale')" translate>Expand</span>
                            <span ng-show="$ctrl.tabSelected('locale')" translate>Close</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="panel-animate" ng-show="$ctrl.tabSelected('locale')">
                <div class="panel-body pref-body">
                    <div class="row pref-row">
                        <div class="col-md-8 col-md-offset-4">
                            <div class="form-group">
                                <label for="locale" translate>Language</label>
                                <p class="text-muted" translate>The locale determines your default language for MPDX as well as how numbers, dates and other information shows up in MPDX.</p>
                                <select class="form-control" ng-model="$ctrl.users.current.attributes.preferences.locale" id="locale" ng-change="$ctrl.setLocale()" chosen>
                                    <option ng-repeat="option in $ctrl.languages" value="{{option.alias}}">
                                        {{option.englishName}} ({{option.nativeName}} - {{option.alias}})
                                    </option>
                                </select>
                            </div>
                            <button type="submit" ng-click="$ctrl.save()" ng-disabled="$ctrl.saving" class="btn btn-primary btn-actionable">
                                <span translate>Save</span>&nbsp;
                                <span class="btn-progress" ng-show="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default pref-panel">
            <div class="panel-heading pref-head" ng-click="$ctrl.setTab('default_account_list')">
                <div class="row">
                    <div class="col-sm-4">
                        <i class="fa fa-angle-right" ng-class="{ 'fa-rotate-90' : $ctrl.tabSelected('default_account_list') }"></i>
                        <span translate>Default Account</span>
                    </div>
                    <div class="col-sm-6 pref-current">
                        {{$ctrl.accountsMap[$ctrl.default_account_list].attributes.name}}
                    </div>
                    <div class="col-sm-2 text-right">
                        <span class="panel-open-btn">
                            <span ng-hide="$ctrl.tabSelected('default_account_list')" translate>Expand</span>
                            <span ng-show="$ctrl.tabSelected('default_account_list')" translate>Close</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="panel-animate" ng-show="$ctrl.tabSelected('default_account_list')">
                <div class="panel-body pref-body">
                    <div class="row pref-row">
                        <div class="col-md-8 col-md-offset-4">
                            <div class="form-group">
                                <label for="defaultAccountList" translate>Default Account List</label>
                                <p class="text-muted" translate>This sets which account you will land in whenever you login to MPDX.</p>
                                <select id="defaultAccountList" class="form-control" ng-model="$ctrl.default_account_list" ng-change="$ctrl.setDefaultAccountList()"
                                        ng-options="al.id as al.attributes.name for al in $ctrl.accountsMap | toArray" chosen>
                                </select>
                            </div>
                            <button type="submit" ng-click="$ctrl.save()" ng-disabled="$ctrl.saving" class="btn btn-primary btn-actionable">
                                <span translate>Save</span>&nbsp;
                                <span class="btn-progress" ng-show="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <h3>Account Settings</h3>
        </div>
    </div>
    <div class="panel-group">
        <div class="panel panel-default pref-panel">
            <div class="panel-heading pref-head" ng-click="$ctrl.setTab('account_list_name')">
                <div class="row">
                    <div class="col-sm-4">
                        <i class="fa fa-angle-right" ng-class="{ 'fa-rotate-90' : $ctrl.tabSelected('account_list_name') }"></i>
                        <span tranlsate>Account Name</span>
                    </div>
                    <div class="col-sm-6 pref-current">
                        {{$ctrl.accountsMap[$ctrl.api.account_list_id].attributes.name}}
                    </div>
                    <div class="col-sm-2 text-right">
                        <span class="panel-open-btn">
                            <span ng-hide="$ctrl.tabSelected('account_list_name')" translate>Expand</span>
                            <span ng-show="$ctrl.tabSelected('account_list_name')" translate>Close</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="panel-animate" ng-show="$ctrl.tabSelected('account_list_name')">
                <div class="panel-body pref-body">
                    <div class="row pref-row">
                        <div class="col-md-8 col-md-offset-4">
                            <div class="form-group">
                                <label for="accountListName" translate>Account Name</label>
                                <p class="text-muted" translate>You can change the account name in MPDX into something that is more identifiable to you. This will not change the account name with your organization.</p>
                                <input type="text" id="accountListName" class="form-control" ng-model="$ctrl.accountsMap[$ctrl.api.account_list_id].attributes.name">
                            </div>
                            <button type="submit" ng-click="$ctrl.saveAccount()" ng-disabled="$ctrl.saving" class="btn btn-primary btn-actionable">
                                <span translate>Save</span>&nbsp;
                                <span class="btn-progress" ng-show="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default pref-panel">
            <div class="panel-heading pref-head" ng-click="$ctrl.setTab('monthly_goal')">
                <div class="row">
                    <div class="col-sm-4">
                        <i class="fa fa-angle-right" ng-class="{ 'fa-rotate-90' : $ctrl.tabSelected('monthly_goal') }"></i>
                        <span translate>Monthly Goal</span>
                    </div>
                    <div class="col-sm-6 pref-current">
                        {{$ctrl.accountsMap[$ctrl.api.account_list_id].attributes.monthly_goal}}
                    </div>
                    <div class="col-sm-2 text-right">
                        <span class="panel-open-btn">
                            <span ng-hide="$ctrl.tabSelected('monthly_goal')" translate>Expand</span>
                            <span ng-show="$ctrl.tabSelected('monthly_goal')" translate>Close</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="panel-animate" ng-show="$ctrl.tabSelected('monthly_goal')">
                <div class="panel-body pref-body">
                    <div class="row pref-row">
                        <div class="col-md-8 col-md-offset-4">
                            <div class="form-group">
                                <label for="monthlyGoal" translate>Monthly goal</label>
                                <p class="text-muted" translate>This amount should be set to the amount your organization has determined is your target monthly goal. If you do not know, make your best guess for now. You can change it at any time.</p>
                                <input type="text" id="monthlyGoal" class="form-control" ng-model="$ctrl.accountsMap[$ctrl.api.account_list_id].attributes.monthly_goal">
                            </div>
                            <button type="submit" ng-click="$ctrl.saveAccount()" ng-disabled="$ctrl.saving" class="btn btn-primary btn-actionable">
                                <span translate>Save</span>>&nbsp;
                                <span class="btn-progress" ng-show="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default pref-panel">
            <div class="panel-heading pref-head" ng-click="$ctrl.setTab('home_country')">
                <div class="row">
                    <div class="col-sm-4">
                        <i class="fa fa-angle-right" ng-class="{ 'fa-rotate-90' : $ctrl.tabSelected('home_country') }"></i>
                        <span translate>Home Country</span>
                    </div>
                    <div class="col-sm-6 pref-current">
                        {{$ctrl.accountsMap[$ctrl.api.account_list_id].attributes.home_country}}
                    </div>
                    <div class="col-sm-2 text-right">
                        <span class="panel-open-btn">
                            <span ng-hide="$ctrl.tabSelected('home_country')" translate>Expand</span>
                            <span ng-show="$ctrl.tabSelected('home_country')" translate>Close</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="panel-animate" ng-show="$ctrl.tabSelected('home_country')">
                <div class="panel-body pref-body">
                    <div class="row pref-row">
                        <div class="col-md-8 col-md-offset-4">
                            <div class="form-group">
                                <label for="homeCountry" translate>Home Country</label>
                                <p class="text-muted" translate>This should be the place you are living and sending out physical communications from. This will be used in exports for mailing address information.</p>
                                <select id="homeCountry" class="country_select form-control" ng-model="$ctrl.users.current.attributes.preferences.home_country" chosen>
                                    <option ng-repeat="country in $ctrl.countries">{{ country }}</option>
                                </select>
                            </div>
                            <button type="submit" ng-click="$ctrl.saveAccount()" ng-disabled="$ctrl.saving" class="btn btn-primary btn-actionable">
                                <span translate>Save</span>&nbsp;
                                <span class="btn-progress" ng-show="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default pref-panel" ng-if="$ctrl.rollout.active('currencies')">
            <div class="panel-heading pref-head" ng-click="$ctrl.setTab('currency')">
                <div class="row">
                    <div class="col-sm-4">
                        <i class="fa fa-angle-right" ng-class="{ 'fa-rotate-90' : $ctrl.tabSelected('currency') }"></i>
                        <span translate>Default Currency</span>
                    </div>
                    <div class="col-sm-6 pref-current">
                        {{$ctrl.users.current.attributes.preferences.currency}}
                    </div>
                    <div class="col-sm-2 text-right">
                        <span class="panel-open-btn">
                            <span ng-hide="$ctrl.tabSelected('currency')" translate>Expand</span>
                            <span ng-show="$ctrl.tabSelected('currency')" translate>Close</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="panel-animate" ng-show="$ctrl.tabSelected('currency')">
                <div class="panel-body pref-body">
                    <div class="row pref-row">
                        <div class="col-md-8 col-md-offset-4">
                            <div class="form-group">
                                <label for="currency" translate>Default Currency</label>
                                <select id="currency" class="form-control" ng-model="$ctrl.users.current.attributes.preferences.currency" chosen>
                                    <option ng-repeat="currency in  $ctrl.currencies">{{currency}}</option>
                                </select>
                            </div>
                            <button type="submit" ng-click="$ctrl.saveAccount()" ng-disabled="$ctrl.saving" class="btn btn-primary btn-actionable">
                                <span translate>Save</span>&nbsp;
                                <span class="btn-progress" ng-show="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default pref-panel" ng-if="$ctrl.rollout.active($ctrl.multi_currency_balance) && $ctrl.accounts.current.designation_organizations.count > 1">
            <div class="panel-heading pref-head" ng-click="$ctrl.setTab('salary_organization_id')">
                <div class="row">
                    <div class="col-sm-4">
                        <i class="fa fa-angle-right" ng-class="{ 'fa-rotate-90' : $ctrl.tabSelected('salary_organization_id') }"></i>
                        <span translate>Primary Organization</span>
                    </div>
                    <div class="col-sm-6 pref-current">
                        {{$ctrl.salary_organization_string}}
                    </div>
                    <div class="col-sm-2 text-right">
                        <span class="panel-open-btn">
                            <span ng-hide="$ctrl.tabSelected('salary_organization_id')" translate>Expand</span>
                            <span ng-show="$ctrl.tabSelected('salary_organization_id')" translate>Close</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="panel-animate" ng-show="$ctrl.tabSelected('salary_organization_id')">
                <div class="panel-body pref-body">
                    <div class="row pref-row">
                        <div class="col-md-8 col-md-offset-4">
                            <div class="form-group">
                                <label for="salaryOrganizationId" translate>Primary Organization</label>
                                <p class="text-muted" translate>This should be the organization you get paid from and most likely correspond to the country you are living and serving in. This will set your currency conversions for multi-currency accounts to the currency of this organization both on the dashboard and the corresponding contribution reports.</p>
                                <select id="salaryOrganizationId" class="form-control" ng-model="$ctrl.users.current.attributes.preferences.salary_organization_id" ng-change="$ctrl.setSalaryOrg()" chosen>
                                    <option ng-repeat="org in $ctrl.salary_organization_select(current_account_list)">{{org}}</option>
                                </select>
                            </div>
                            <button type="submit" ng-click="$ctrl.saveAccount()" ng-disabled="$ctrl.saving" class="btn btn-primary btn-actionable">
                                <span translate>Save</span>&nbsp;
                                <span class="btn-progress" ng-show="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default pref-panel">
            <div class="panel-heading pref-head" ng-click="$ctrl.setTab('tester')">
                <div class="row">
                    <div class="col-sm-4">
                        <i class="fa fa-angle-right" ng-class="{ 'fa-rotate-90' : $ctrl.tabSelected('tester') }"></i>
                        <span translate>Early Adopter</span>
                    </div>
                    <div class="col-sm-6 pref-current" translate>
                        {{$ctrl.users.current.attributes.preferences.tester ? 'Yes' : 'No'}}
                    </div>
                    <div class="col-sm-2 text-right">
                        <span class="panel-open-btn">
                            <span ng-hide="$ctrl.tabSelected('tester')" translate>Expand</span>
                            <span ng-show="$ctrl.tabSelected('tester')" translate>Close</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="panel-animate" ng-show="$ctrl.tabSelected('tester')">
                <div class="panel-body pref-body">
                    <div class="row pref-row">
                        <div class="col-md-8 col-md-offset-4">
                            <label><input type="checkbox" ng-model="$ctrl.users.current.attributes.preferences.tester"><span translate>Early adopter</span></label>
                            <p translate>
                                By checking this box, you are telling us that you'd like to test new features for bugs before they are
                                rolled out to the full MPDx user base. We'll send you an email when new features are available on your
                                account to test, and then ask for you to give us feedback - both if you experience bugs and also about
                                your thoughts about the feature(s) you are testing.
                            </p>
                            <button type="submit" ng-click="$ctrl.saveAccount()" ng-disabled="$ctrl.saving" class="btn btn-primary btn-actionable">
                                <span translate>Save</span>&nbsp;
                                <span class="btn-progress" ng-show="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="page-filters page-filters-close">
                <div class="pull-right">
                    <button class="btn btn-link" id="preference_reset_welcome" translate>Reset Welcome Tour</button>
                </div>
            </div>
        </div>
    </div>
</form>
