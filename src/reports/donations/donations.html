<div class="reports">
    <donations-chart contact="$ctrl.contact"></donations-chart>
    <div class="pull-right" ng-if="$ctrl.byMonth">
        <button ng-click="$ctrl.gotoPrevMonth()" class="btn btn-default">
            <i class="fa fa-angle-left"></i>
            <translate>Previous Month</translate>
        </button>
        &nbsp; &nbsp;
        <button ng-click="$ctrl.gotoNextMonth()" class="btn btn-default" ng-disabled="!$ctrl.enableNext">
            <translate>Next Month</translate>
            <i class="fa fa-angle-right"></i>
        </button>
    </div>
    <h2 translate>Donations</h2>
    <div block-ui="donations">
        <div class="panel panel-default">
            <div class="panel-heading" ng-if="$ctrl.byMonth">
                <h4 class="panel-title">{{$ctrl.startDate.format('MMMM YYYY')}}</h4>
            </div>
            <div class="panel-body" ng-if="$ctrl.donationsList.length > 0">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th ng-if="$ctrl.contact" class="col-md-2" translate>Partner No.</th>
                            <th class="col-md-2 date" translate>Date</th>
                            <th ng-if="!$ctrl.contact" class="col-md-3" translate>Partner</th>
                            <th class="col-md-1 text-right" translate>Amount</th>
                            <th class="col-md-3" ng-if="$ctrl.designationAccounts.data.length > 0" translate>Designation</th>
                            <th class="col-md-1" translate>Method</th>
                            <th class="col-md-1" translate>Appeal</th>
                            <th class="col-md-1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="donation in $ctrl.donationsList">
                            <td ng-if="$ctrl.contact">{{ donation.donor_account.account_number }}</td>
                            <td class="date">{{ donation.donation_date | moment: 'l' }}</td>
                            <td ng-if="!$ctrl.contact">
                                <a ui-sref="contacts.show({ contactId: donation.contact.id })">{{ donation.contact.name }} ({{ donation.donor_account.account_number }})</a>
                            </td>
                            <td class="text-right">{{ donation.amount | currency:'':0 }} {{ donation.currency }}</td>
                            <td>{{ donation.designation_account.name }} ({{ donation.designation_account.designation_number }})</td>
                            <td>{{ donation.payment_method }}</td>
                            <td>{{ donation.appeal.name }}</td>
                            <td class="text-right"><a ng-click="$ctrl.openDonationModal(donation)"><i class="fa fa-pencil-square-o"></i></a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="panel-footer" ng-if="$ctrl.donationsList.length == 0" translate>
                No donations
            </div>
        </div>
        <pagination ng-if="$ctrl.donationsList.length > 0"
                    meta="$ctrl.donationsList.meta.pagination"
                    on-change="$ctrl.load(page)"
                    class="text-center">
        </pagination>
    </div>
</div>
