<modal title="{{'Donation' | translate}}" cancel="$hide()" save="$ctrl.save()" delete="$ctrl.delete()" show-delete="$ctrl.donation.id">
    <div block-ui="donationModal">
        <div class="form-group">
            <label for="donation_date"><translate>Date</translate> <span class="text-danger">*</span></label>
            <input type="text"
                   class="form-control"
                   ng-model="$ctrl.donation.donation_date"
                   name="date"
                   id="donation_date"
                   data-date-format="yyyy-MM-dd"
                   bs-datepicker required />
        </div>
        <div class="form-group">
            <div class="row">
                <div class="col-md-4">
                    <label for="currency"><translate>Currency</translate> <span class="text-danger">*</span></label>
                    <select ng-model="$ctrl.donation.currency" id="currency" class="form-control" chosen required>
                        <option value=""></option>
                        <option ng-repeat="currency in $ctrl.currency.list | toArray" value="{{currency.code}}">{{currency.name}} ({{currency.symbol}})</option>
                    </select>
                </div>
                <div class="col-md-8">
                    <label for="tendered_amount"><translate>Amount</translate> <span class="text-danger">*</span></label>
                    <input type="text" ng-model="$ctrl.donation.amount" id="tendered_amount" class="form-control" pattern="[0-9.,$]*" required>
                </div>
            </div>
        </div>
        <div class="form-group">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="appeal_id" translate>Appeal</label>
                        <select
                            ng-options="appeal as appeal.name for appeal in $ctrl.appeals.list track by appeal.id"
                            ng-model="$ctrl.donation.appeal"
                            class="form-control"
                            id="appeal_id"
                            chosen>
                        </select>
                    </div>
                </div>
                <div class="col-md-8">
                    <label for="appeal_amount" translate>Appeal Amount</label>
                    <input type="text"
                           ng-model="$ctrl.donation.appeal_amount"
                           id="appeal_amount"
                           class="form-control"
                           placeholder="{{ 'Leave empty to use full donation amount' | translate }}"
                           ng-disabled="!$ctrl.donation.appeal">
                </div>
            </div>
        </div>
        <div class="form-group">
            <div class="row">
                <div class="col-md-6">
                    <label for="donor_account_id"><translate>Partner Account</translate> <span class="text-danger">*</span></label>
                    <select
                        ng-options="donor_account as donor_account.name + ' (' + donor_account.account_number + ')' for donor_account in $ctrl.donorAccounts.list track by donor_account.id"
                        ng-model="$ctrl.donation.donor_account"
                        class="form-control"
                        id="donor_account_id"
                        chosen required>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="designation_account_id"><translate>Designation Account</translate> <span class="text-danger">*</span></label>
                    <select
                        ng-options="designation_account as designation_account.name + ' (' + designation_account.designation_number + ')' for designation_account in $ctrl.designationAccounts.list track by designation_account.id"
                        ng-model="$ctrl.donation.designation_account"
                        class="form-control"
                        id="designation_account_id"
                        chosen required>
                    </select>
                </div>
            </div>
        </div>
    </div>
</modal>
