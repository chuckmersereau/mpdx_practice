<div block-ui="donations">
    <h2 translate>Donations</h2>
    <div class="panel panel-default panel-report">
        <div class="panel-body panel-report-heading">
            <div class="row">
                <div class="col-xs-6">
                    <h4 translate>Donations for {{$ctrl.startDate}} through {{$ctrl.endDate}}</h4>
                </div>
                <div class="col-xs-6 text-right">
                    <button ng-click="$ctrl.gotoPrevMonth()" class="btn btn-default btn-sm">
                        <i class="fa fa-angle-left"></i>
                        <translate>Previous Month</translate>
                    </button>
                    &nbsp; &nbsp;
                    <button ng-click="$ctrl.gotoNextMonth()" class="btn btn-default btn-sm" ng-disabled="!$ctrl.enableNext">
                        <translate>Next Month</translate>
                        <i class="fa fa-angle-right"></i>
                    </button>
                </div>
            </div>
        </div>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th ng-if="$ctrl.contact" translate>Donor</th>
                    <th class="date" translate>Date</th>
                    <th ng-if="!$ctrl.contact" translate>Donor</th>
                    <th class="right" translate>Amount</th>
                    <th></th>
                    <th ng-if="$ctrl.designationAccounts.data.length > 0" translate>Designation</th>
                    <th translate>Method</th>
                    <th translate>Motivation</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="donation in $ctrl.donations[$ctrl.index]">
                    <td ng-if="$ctrl.contact">{{ donation.donor_account.name }}</td>
                    <td class="date">{{ donation.donation_date | moment: 'l' }}</td>
                    <td ng-if="!$ctrl.contact"><a ui-sref="contact({ contactId: donation.contact_id })">{{ donation.name }}</a></td>
                    <td class="right">{{ donation.amount }}</td>
                    <td>{{ donation.currency }}</td>
                    <td ng-if="$ctrl.designationAccounts.data.length > 0">{{ donation.designation_account_id }}</td>
                    <td>{{ donation.payment_method }}</td>
                    <td>{{ donation.motivation }}</td>
                    <td><a ui-sref="reports.donations.edit({ donationId: donation.id})"><i class="fa fa-pencil-square-o"></i></a></td>
                </tr>
                <tr ng-if="$ctrl.donations[$ctrl.index].length == 0">
                    <td colspan="100" class="text-center" translate>No donations this month.</td>
                </tr>
            </tbody>
            <tfoot ng-if="!$ctrl.contact">
                <tr class="sum" ng-repeat="d in $ctrl.donationTotals[$ctrl.index] | toArray">
                    <td></td>
                    <td class="right"><strong translate>Total {{d.currency}} Donations {{d.count}}</strong></td>
                    <td class="right">{{d.amount}} {{$ctrl.currency.list[d.currency].symbol}}</td>
                    <td colspan="4"></td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
