<div block-ui="contactShow">
    <div class="contact-actions">
        <div class="pull-right">
            <a class="btn btn-reverse" ng-click="$ctrl.goLeft()">
                <i class="fa fa-chevron-left" aria-hidden="true"></i>
            </a>
            <a class="btn btn-reverse" ng-click="$ctrl.goRight()">
                <i class="fa fa-chevron-right" aria-hidden="true"></i>
            </a>
        </div>
        <a class="btn btn-default" ng-click="$ctrl.openAddReferralsModal()">
            <i class="fa fa-users" aria-hidden="true"></i>
            <translate>Add Referrals</translate>
        </a>
        <a class="btn btn-default" ng-click="$ctrl.openAddTaskModal()">
            <i class="fa fa-square-o" aria-hidden="true"></i>
            <translate>Add Task</translate>
        </a>
        <a class="btn btn-default" ng-click="$ctrl.openLogTaskModal()">
            <i class="fa fa-check-square-o" aria-hidden="true"></i>
            <translate>Log Task</translate>
        </a>
        <a class="btn btn-default" ng-click="$ctrl.hideContact()" ng-hide="$ctrl.contact.status == 'Never Ask'">
            <i class="fa fa-eye-slash" aria-hidden="true"></i>
            <translate>Hide Contact</translate>
        </a>
    </div>
    <div class="contact-card">
        <div class="row">
            <div class="col-md-10">
                <div class="avatar" bg-img="{{$ctrl.contact.square_avatar | stripMpdx }}"></div>
                <div class="top-content">
                    <contact-info contact="$ctrl.contact" on-save="$ctrl.save()"></contact-info>
                </div>
            </div>
            <div class="col-md-2">
                <div class="see-notes">
                    <a class="btn btn-reverse" ng-click="$ctrl.displayNotes()">
                        <i class="fa fa-sticky-note-o"></i>
                        <translate>See Notes</translate>
                    </a>
                </div>
                <div class="card" ng-repeat="address in $ctrl.contact.addresses" ng-if="address.id == $ctrl.contact.primary_address_id">
                    <contact-address address="address"></contact-address>
                </div>
            </div>
        </div>
        <div class="contacts-gray-line"></div>
        <div>
            <contact-people contact="$ctrl.contact" on-primary="$ctrl.onPrimary($personId)"></contact-people>
        </div>
        <div id="contact-tabs" class="horizontal-tab-sortable">
            <div class="sortable-row left-tabs" as-sortable="$ctrl.sortableOptions" data-ng-model="$ctrl.tabsLabels">
                <div ng-repeat="item in $ctrl.tabsLabels" as-sortable-item ng-class="{'active-item': $ctrl.activeTab==item.key}">
                    <a as-sortable-item-handle ng-click="$ctrl.activeTab=item.key">{{ item.value | translate }}</a>
                </div>
            </div>

            <div class="tabs-info">
                <a class="tip" data-trigger="hover" data-title="{{ 'You can reorder these tabs to your liking! Just Drag them left or right.' | translate }}" data-placement="left" bs-tooltip><i class="fa fa-question-circle"></i></a>
            </div>
        </div>
        <div ng-repeat="item in $ctrl.tabsLabels">
            <div ng-if="item['key']=='details'" ng-show="item['key']==$ctrl.activeTab">
                <contact-details contact="$ctrl.contact" donor-accounts="$ctrl.contact.donor_accounts" on-save="$ctrl.save()"></contact-details>
            </div>
            <div ng-if="item['key']=='donations'" ng-show="item['key']==$ctrl.activeTab">
                <donations contact="$ctrl.contact"></donations>
            </div>
            <div ng-if="item['key']=='tasks'" ng-show="item['key']==$ctrl.activeTab">
                <contact-tasks contact="$ctrl.contact"></contact-tasks>
            </div>
            <div ng-if="item['key']=='referrals'" ng-show="item['key']==$ctrl.activeTab">
                <contact-referrals contact="$ctrl.contact"></contact-referrals>
                <button ng-click="$ctrl.openAddReferralsModal()" class="btn btn-primary" translate>Add Referrals</button>
            </div>
            <div ng-if="item['key']=='notes'" ng-show="item['key']==$ctrl.activeTab">
                <contact-notes contact="$ctrl.contact" on-save="$ctrl.save()"></contact-notes>
            </div>
        </div>
    </div>
</div>
