<div block-ui="contactShow" class="contact-show">
    <contact-info contact="$ctrl.contacts.current" on-save="$ctrl.save()"></contact-info>
    <div id="contact-tabs">
        <div class="horizontal-tab-sortable">
            <div class="sortable-row" as-sortable="$ctrl.sortableOptions" data-ng-model="$ctrl.tabsLabels">
                <div ng-repeat="item in $ctrl.tabsLabels"
                     as-sortable-item
                     class="as-sortable-item"
                     ng-class="{'active-item': $ctrl.contacts.activeTab === item.key, 'active-drawer': $ctrl.contacts.activeDrawer === item.key}">
                    <span as-sortable-item-handle>
                        <a ng-click="$ctrl.setActiveTab(item.key)">{{ item.value | translate }}</a>
                        <a ng-click="$ctrl.setActiveDrawer(item.key); $event.stopPropagation()"
                           ng-if="item.drawerable"
                           class="expand-link"><i class="fas fa-expand"></i></a>
                    </span>
                </div>
            </div>
        </div>
        <div class="tab-content">
            <ui-view>
                <donations in-contact="true"></donations>
            </ui-view>
        </div>
    </div>
    <div class="contact-drawer">
        <contact-addresses ng-if="$ctrl.contacts.activeDrawer === 'addresses'"></contact-addresses>
        <contact-details contact="$ctrl.contacts.current"
                         donor-accounts="$ctrl.contacts.current.donor_accounts"
                         on-save="$ctrl.save()"
                         ng-if="$ctrl.contacts.activeDrawer === 'details'">
        </contact-details>
        <contact-people contact="$ctrl.contacts.current"
                        ng-if="$ctrl.contacts.activeDrawer === 'people'"></contact-people>
        <contact-notes ng-if="$ctrl.contacts.activeDrawer === 'notes'"></contact-notes>
        <contact-referrals ng-if="$ctrl.contacts.activeDrawer === 'referrals'"></contact-referrals>
    </div>
</div>
