<div class="contacts-find-duplicates">
    <h1>Reconcile Partner Names</h1>

    <div ng-if="$ctrl.contactReconciler.duplicateContacts.length">
        <p>
            You have {{$ctrl.contactReconciler.duplicateContactsTotal}} possible individual detail conflicts caused when imported data into MPDx. We recommend reconciling these as soon as possible. MPDx has made it’s best guess at the correct individual detail. Please confirm or change the setting for each conflict below. No data will be lost.
            <br>
            <span class="warning">This cannot be undone.</span>
        </p>

        <a ui-sref="home" translate><strong>I’ll reconcile conflicts later, take me to MPDx</strong></a>

        <div id="duplicate-contacts" block-ui="find-duplicates" class="row">
            <div class="col-sm-10 col-sm-offset-1">
                <div class="row" ng-repeat="duplicateContact in $ctrl.contactReconciler.duplicateContacts" ng-if="duplicateContact.contacts.length == 2">
                    <contacts-reconcile-partner-item contact="duplicateContact.contacts[0]" selected="duplicateContact.mergeChoice == 0" dont-merge="duplicateContact.mergeChoice == 2"></contacts-reconcile-partner-item>

                    <div class="col-sm-2 text-center choices">
                        <i class="fa fa-arrow-left choice-left" ng-class="{'selected': duplicateContact.mergeChoice == 0}" ng-click="$ctrl.useThisOne(duplicateContact, 0)"></i>
                        <i class="fa fa-arrow-right choice-right" ng-class="{'selected': duplicateContact.mergeChoice == 1}" ng-click="$ctrl.useThisOne(duplicateContact, 1)"></i>
                        <i class="fa fa-close choice-cancel" ng-class="{'selected': duplicateContact.mergeChoice == 2}" ng-click="$ctrl.useThisOne(duplicateContact, 2)"></i>
                    </div>

                    <contacts-reconcile-partner-item contact="duplicateContact.contacts[1]" selected="duplicateContact.mergeChoice == 1" dont-merge="duplicateContact.mergeChoice == 2"></contacts-reconcile-partner-item>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6 col-sm-offset-3 text-center actions">
                <button class="btn btn-warning" ng-click="$ctrl.confirm(true)">Confirm These {{$ctrl.contactReconciler.duplicateContacts.length}} And Continue</button>
                <span>OR</span>
                <button class="btn btn-warning" ng-click="$ctrl.confirm(false)">Confirm These {{$ctrl.contactReconciler.duplicateContacts.length}} And Quit Reconciling</button>
            </div>
        </div>
    </div>

    <div ng-if="!$ctrl.contactReconciler.duplicateContacts.length">
        <p>We weren't able to detect any duplicates on your account.</p>
    </div>
</div>
