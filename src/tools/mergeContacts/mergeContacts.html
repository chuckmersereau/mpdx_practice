<div class="merges">
    <h2 translate>Merge Contacts</h2>
    <div ng-if="$ctrl.mergeContacts.duplicates.length">
        <p>
            <translate translate-plural="You have {{$count}} possible duplicate contacts." translate-n="$ctrl.mergeContacts.total">
                You have 1 possible duplicate contact.
            </translate>
            <translate>
                This is sometimes caused when you imported data into MPDX.
                We recommend reconciling these as soon as possible.
                Please select the duplicate that should win the merge.
                No data will be lost.
            </translate>
        </p>
        <p>
            <strong class="text-danger" translate>This cannot be undone.</strong>
        </p>
        <hr>
        <div block-ui="merge-contacts">
            <div class="row">
                <div class="col-sm-10 col-sm-offset-1">
                    <div class="row" ng-repeat="duplicate in $ctrl.mergeContacts.duplicates">
                        <div class="col-sm-5">
                            <merge-contacts-item contact="duplicate.contacts[0]" on-click="$ctrl.useThisOne(duplicate, 0)" selected="duplicate.mergeChoice == 0" ignored="duplicate.mergeChoice == 2"></merge-contacts-item>
                        </div>
                        <div class="col-sm-2 text-center choices">
                            <i class="fa fa-arrow-left choice-left" ng-class="{'selected': duplicate.mergeChoice == 0}" ng-click="$ctrl.useThisOne(duplicate, 0)"></i>
                            <i class="fa fa-arrow-right choice-right" ng-class="{'selected': duplicate.mergeChoice == 1}" ng-click="$ctrl.useThisOne(duplicate, 1)"></i>
                            <i class="fa fa-close choice-cancel" ng-class="{'selected': duplicate.mergeChoice == 2}" ng-click="$ctrl.useThisOne(duplicate, 2)"></i>
                        </div>
                        <div class="col-sm-5">
                            <merge-contacts-item contact="duplicate.contacts[1]" on-click="$ctrl.useThisOne(duplicate, 1)" selected="duplicate.mergeChoice == 1" ignored="duplicate.mergeChoice == 2"></merge-contacts-item>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-5 text-right">
                            <button class="btn btn-primary" ng-click="$ctrl.confirm(false)" ng-disabled="$ctrl.confirmButtonDisabled()" translate>Confirm and Continue</button>
                        </div>
                        <div class="col-sm-2 text-center confirm-or">
                            <span>OR</span>
                        </div>
                        <div class="col-sm-5">
                            <button class="btn btn-primary" ng-click="$ctrl.confirm(true)" ng-disabled="$ctrl.confirmButtonDisabled()" translate>Confirm and Leave</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div ng-if="!$ctrl.mergeContacts.duplicates.length">
        <p translate>No Contacts to merge right now!</p>
    </div>
</div>
