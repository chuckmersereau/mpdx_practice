<div class="nav--global">
    <div class="container">

        <div class="row">
            <div class="col-sm-12">
                <div class="pull-right navbar-quick">

                    <div class="section" ng-if="!$ctrl.isInSetup()">
                        <menu-search></menu-search>
                    </div>
                    <div class="section">
                        <div class="dropdown">
                            <a bs-dropdown class="settings-drop btn btn-default btn-block" type="button" data-placement="bottom-right">
                                <i class="fa fa-cog"></i> Settings
                            </a>
                            <ul class="dropdown-menu" role="menu">
                                <li role="presentation" ng-if="!$ctrl.isInSetup()"><a ui-sref="preferences.personal" translate>Preferences</a></li>
                                <li role="presentation" ng-if="!$ctrl.isInSetup()"><a ui-sref="preferences.notifications" translate>Notifications</a></li>
                                <li role="presentation" ng-if="!$ctrl.isInSetup()"><a ui-sref="preferences.imports" translate>Import Contacts</a></li>
                                <li role="presentation" ng-if="!$ctrl.isInSetup()"><a ui-sref="preferences.integrations" translate>Connect Services</a></li>
                                <li role="presentation" ng-if="!$ctrl.isInSetup()"><a ui-sref="preferences.accounts" translate>Manage Account</a></li>
                                <li role="presentation" ng-if="$ctrl.users.current.admin">
                                    <a ui-sref="unavailable" translate>Admin</a>
                                </li>
                                <li role="presentation"><a ui-sref="logout" translate>Log out</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="section">
                        <account-lists ng-if="!$ctrl.isInSetup()"></account-lists>
                    </div>
                    <div class="section"  ng-if="!$ctrl.isInSetup()">
                        <div class="dropdown">
                            <a bs-dropdown class="btn btn-reverse btn-block" href="#" type="button" id="quick-drop" aria-expanded="true"
                               analytics-on analytics-category="Global Events" analytics-label="Actions" data-placement="bottom-right"
                               translate>
                                <i class="fa fa-plus"></i> Add
                            </a>
                            <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="quick-drop">
                                <li role="presentation"><a ng-click="$ctrl.contacts.openNewContactModal()" translate>Add Contact</a></li>
                                <li role="presentation"><a ng-click="$ctrl.donations.openNewDonationModal()" translate>Add Donation</a></li>
                                <li role="presentation"><a ng-click="$ctrl.tasksService.openNewTaskModal()" translate>Add Task</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="section">
                        <a href="" class="btn btn-block notifications-link"><i class=" fa fa-bell"></i> <span class="badge">4</span></a>
                    </div>
                </div>
                <div id="brand" class="pull-left">
                    <a ui-sref="home" class="nav--logo"></a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="nav--menu">
    <div class="container">

        <div class="row">
            <div class="col-sm-12">
                <nav class="navbar navbar-toggleable-md pull-left">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="mpdx-nav" ng-if="!$ctrl.isInSetup()">
                        <ul class="nav navbar-nav">
                            <li class="item" ui-sref-active="active"><a ui-sref="home" translate>Dashboard</a></li>
                            <li class="item" ng-class="{active: $ctrl.isInState('contact')}"><a ui-sref="contacts" translate>Contacts</a></li>
                            <li class="item" ui-sref-active="active"><a ui-sref="tasks" translate>Tasks</a></li>
                            <li class="item" ng-class="{active: $ctrl.isInState('reports')}"><a ui-sref="reports.donations" translate>Reports</a></li>
                            <li class="item" ng-class="{active: $ctrl.isInState('tools')}"><a ui-sref="tools" translate>Tools</a></li>
                            <li class="item last" ui-sref-active="active"><a ng-click="$ctrl.showHelp()" translate>Help</a></li>
                        </ul>
                    </div>
                </nav>
                <menu-balances class="pull-right"></menu-balances>
            </div>
        </div>

    </div>
</div>

<div class="nav--secondary" ng-if="!$ctrl.isInSetup()">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="pull-left" ng-if="$ctrl.isInState('contact')" ng-init="$ctrl.contactReconciler.fetchAll()">
                    <div class="section"><a ui-sref="preferences.imports" translate>Import Contacts</a></div>
                    <div class="section">
                        <a class="reconcile-contacts" ui-sref="contacts.reconcile_partners">
                            <translate>Merge Contacts</translate> <span class="badge">{{$ctrl.contactReconciler.duplicateContactsTotal}}</span>
                        </a>
                    </div>
                    <div class="section">
                        <a class="reconcile-contacts" ui-sref="contacts.reconcile_individuals">
                            <translate>Merge People</translate> <span class="badge">{{$ctrl.contactReconciler.duplicatePeopleTotal}}</span>
                        </a>
                    </div>
                </div>
                <div class="pull-left" ng-show="$ctrl.isInState('reports')">
                    <div class="section" ng-class="{active: $ctrl.isInState('reports.donations')}">
                        <a ui-sref="reports.donations" translate>Donations</a>
                    </div>
                    <div class="section" ng-class="{active: $ctrl.isInState('reports.monthly')}">
                        <a ui-sref="reports.monthly" translate>Expected Monthly Total</a>
                    </div>
                    <div class="section" ng-class="{active: $ctrl.isInState('reports.balances')}">
                        <a ui-sref="reports.balances" translate>Balances</a>
                    </div>
                    <div class="section" ng-class="{active: $ctrl.isInState('reports.salary')}">
                        <a ui-sref="reports.salary" translate>Contributions by Salary Currency</a>
                    </div>
                    <div class="section" ng-class="{active: $ctrl.isInState('reports.partner')}">
                        <a ui-sref="reports.partner" translate>Contributions by Partner Currency</a>
                    </div>
                </div>
                <div class="pull-left" ng-show="$ctrl.isInState('tools')">
                    <div class="section">
                        <div class="dropdown">
                            <a bs-dropdown type="button">
                                <i class="fa fa-angle-down"></i>
                                <translate>Tools</translate>
                            </a>
                            <ul class="dropdown-menu" role="menu">
                                <li role="presentation" ng-repeat="tool in $ctrl.tools.data" ng-if="tool.enabled">
                                    <a ng-click="$ctrl.state.go(tool.link)">
                                        <i class="{{tool.icon}}"></i>
                                        {{tool.title}}
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="section" ng-if="$ctrl.state.$current.name != 'tools'">
                        {{$ctrl.state.$current.title}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
